#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

set -eo pipefail

function message {
  echo "$1"
  sync
}


EXEC_DIR=$(cd $(dirname $0); pwd)
mkdir -p "$1"
BUILD_DIR=$(cd "$1"; pwd)
mkdir -p "$2"
CACHE_DIR=$(cd "$2"; pwd)

ver=${GOVERSION:-1.1.1}
file=${GOFILE:-go$ver.$(uname|tr A-Z a-z)-amd64.tar.gz}
url=${GOURL:-http://go.googlecode.com/files/$file}
buildpack=$(dirname $(dirname $0))

find "$BUILD_DIR"
message $files